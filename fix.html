<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Storyboard: Dozo Mission Songkhla (Stable Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; background-color: #1c1917; color: #e7e5e4; }
        .story-card { background-color: #292524; border: 1px solid #44403c; transition: all 0.3s ease; }
        .story-card:hover { border-color: #ea580c; box-shadow: 0 4px 20px rgba(234, 88, 12, 0.15); }
        .scene-number { font-family: monospace; color: #ea580c; }
        .dialogue-box { background-color: #000000; border-left: 4px solid #ea580c; font-family: monospace; transition: all 0.3s ease; }
        .ai-result-box { background-color: #1e293b; border-left: 4px solid #8b5cf6; animation: fadeIn 0.5s ease-in; }
        .img-container { aspect-ratio: 16/9; width: 100%; background-color: #000; overflow: hidden; display: flex; align-items: center; justify-content: center; position: relative; }
        .img-container img { width: 100%; height: 100%; object-fit: cover; opacity: 0.9; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-spinner { display: inline-block; width: 1rem; height: 1rem; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; }
    </style>
</head>
<body class="p-4 md:p-8 max-w-6xl mx-auto">

    <!-- Config Section -->
    <div class="bg-stone-800 p-4 rounded-lg mb-8 border border-stone-600 shadow-xl ring-1 ring-green-500/20 flex justify-between items-center">
        <div>
            <div class="flex items-center gap-2">
                <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
                <span class="text-green-400 font-bold text-sm">API Connected</span>
            </div>
            <p id="modelStatus" class="text-xs text-stone-500 font-mono mt-1">Ready to use Gemini AI (Flash Preview)</p>
        </div>
        <div class="text-stone-500 text-xs">Environment Key Active</div>
    </div>
    

    <!-- Header -->
    <header class="mb-10 text-center border-b border-stone-700 pb-6">
        <div class="inline-flex items-center gap-2 mb-2 px-3 py-1 bg-violet-900/30 border border-violet-500/30 rounded-full text-violet-300 text-xs font-semibold tracking-wider uppercase">
            <span>‚ú® ‡∏ö‡∏µ‡∏° ‡∏ê‡∏¥‡∏ï‡∏¥‡∏û‡∏á‡∏®‡πå</span>
        </div>
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Storyboard: ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡∏±‡∏ö...‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏∞‡∏™‡∏á‡∏Ç‡∏•‡∏≤</h1>
        <p class="text-stone-400">Client: DOZO | Length: 1 min | Theme: Spy/Heist Comedy</p>
        <div class="mt-4 flex flex-wrap justify-center gap-4 text-sm">
            <span class="bg-stone-800 px-3 py-1 rounded border border-stone-600">üìç Location: ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏á‡∏Ç‡∏•‡∏≤</span>
            <span class="bg-stone-800 px-3 py-1 rounded border border-stone-600">üé≠ Mood: ‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô/‡∏Ç‡∏•‡∏±‡∏á/‡∏ï‡∏•‡∏Å</span>
        </div>
    </header>
    

    <!-- Scene 1 -->
    <div class="story-card rounded-xl overflow-hidden mb-8 grid grid-cols-1 md:grid-cols-2 shadow-lg" id="scene-1">
        <div class="img-container relative group">
            <div class="absolute top-2 left-2 bg-black/70 px-2 py-1 text-xs rounded text-white z-10">REF IMAGE</div>
             <!-- Placeholder for Image -->
             <img src="scene1.jpg" alt="Scene 1 Image">
        </div>
        <div class="p-6 flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-xl font-bold text-white">SCENE 1: ‡∏î‡∏¥‡∏ô‡πÅ‡∏î‡∏ô‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏á‡∏µ‡∏¢‡∏ö</h2>
                    <span class="scene-number">EXT/INT - EVENING</span>
                </div>
                </div>
            <span class="text-xl font-bold text-white">‡πÄ‡∏ß‡∏•‡∏≤: 0:00 - 0:15</span>
            <div>
                <p class="text-stone-300 mb-4 text-sm leading-relaxed" id="desc-1">
                    <strong>‡∏†‡∏≤‡∏û:</strong> ‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏†‡∏≤‡∏û‡∏ï‡∏∂‡∏Å‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏á‡∏Ç‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏π‡∏Ç‡∏•‡∏±‡∏á‡∏¢‡∏≤‡∏°‡πÄ‡∏¢‡πá‡∏ô ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏û‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÇ‡∏ñ‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏¢‡∏≤‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏™‡∏á‡∏±‡∏î<br>
                    <strong>Action:</strong> "‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô" (‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤) ‡∏¢‡πà‡∏≠‡∏á‡πÄ‡∏ö‡∏≤‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ü‡πâ‡∏°‡∏á‡∏≤‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡∏Ñ‡∏£‡∏π
                </p>
                <div id="ai-director-1" class="hidden mt-3 p-3 rounded text-sm text-stone-300 ai-result-box"></div>
            </div>
            
            <div class="mt-4">
                <div class="dialogue-box p-4 rounded text-sm text-stone-300 mb-3" id="dialogue-1">
                    <p><strong class="text-orange-500">SFX:</strong> (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤‡πÄ‡∏î‡∏¥‡∏ô‡∏Å‡πâ‡∏≠‡∏á‡∏ï‡∏∂‡∏Å) ‡∏ï‡∏¥‡πä‡∏Å... ‡∏ï‡∏¥‡πä‡∏Å...</p>
                    <p><strong class="text-orange-500">Music:</strong> ‡∏ò‡∏µ‡∏°‡∏™‡∏≤‡∏¢‡∏•‡∏±‡∏ö Mission Impossible (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡πà‡∏ô‡∏£‡∏∞‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏Å)</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirectorNotes(1)" class="flex-1 bg-stone-700 hover:bg-violet-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scene 2 -->
    <div class="story-card rounded-xl overflow-hidden mb-8 grid grid-cols-1 md:grid-cols-2 shadow-lg" id="scene-2">
        <div class="img-container relative">
            <div class="absolute top-2 left-2 bg-black/70 px-2 py-1 text-xs rounded text-white z-10">REF IMAGE</div>
             <img src="scene2.jpg" alt="Scene 2 Image">
        </div>
        <div class="p-6 flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-xl font-bold text-white">SCENE 2: ‡∏ß‡∏¥‡∏Å‡∏§‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏¥‡∏ß</h2>
                    <span class="scene-number">INT - TEACHER ROOM</span>
                </div>
                </div>
            <span class="text-xl font-bold text-white">‡πÄ‡∏ß‡∏•‡∏≤: 0:15 - 0:25</span>
            <div>
                <p class="text-stone-300 mb-4 text-sm leading-relaxed" id="desc-2">
                    <strong>‡∏†‡∏≤‡∏û:</strong> ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô‡∏ß‡∏≤‡∏á‡πÅ‡∏ü‡πâ‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏ï‡πä‡∏∞ "‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÅ‡∏°‡πà" (‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏•‡∏±‡∏ö) ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡∏ó‡πâ‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏™‡∏ô‡∏±‡πà‡∏ô!<br>
                    <strong>Action:</strong> ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô‡∏ï‡∏Å‡πÉ‡∏à ‡∏£‡∏µ‡∏ö‡∏´‡∏¢‡∏¥‡∏ö "‡πÇ‡∏î‡πÇ‡∏ã‡∏∞" ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡∏´‡∏¥‡∏ß
                </p>
                <div id="ai-director-2" class="hidden mt-3 p-3 rounded text-sm text-stone-300 ai-result-box"></div>
            </div>

            <div class="mt-4">
                <div class="dialogue-box p-4 rounded text-sm text-stone-300 mb-3" id="dialogue-2">
                    <p data-original="‡∏ó‡πâ‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á '‡πÇ‡∏Ñ‡∏£‡∏Å‡∏Ñ‡∏Ñ‡∏Ñ!' (‡πÉ‡∏™‡πà Echo)"><strong class="text-orange-500">SFX:</strong> ‡∏ó‡πâ‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á "‡πÇ‡∏Ñ‡∏£‡∏Å‡∏Ñ‡∏Ñ‡∏Ñ!" (‡πÉ‡∏™‡πà Echo)</p>
                    <p data-original="(‡πÄ‡∏´‡∏á‡∏∑‡πà‡∏≠‡∏ï‡∏Å) '‡∏ã‡∏ß‡∏¢‡πÅ‡∏•‡πâ‡∏ß...'"><strong class="text-orange-500">Knot:</strong> (‡πÄ‡∏´‡∏á‡∏∑‡πà‡∏≠‡∏ï‡∏Å) "‡∏ã‡∏ß‡∏¢‡πÅ‡∏•‡πâ‡∏ß..."</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirectorNotes(2)" class="flex-1 bg-stone-700 hover:bg-violet-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö</span></button>
                    <button onclick="translateToSouthern(2)" class="flex-1 bg-stone-700 hover:bg-orange-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡πÅ‡∏´‡∏•‡∏á‡πÉ‡∏ï‡πâ (‡∏†‡∏≤‡∏©‡∏≤‡∏ñ‡∏¥‡πà‡∏ô)</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scene 3 -->
    <div class="story-card rounded-xl overflow-hidden mb-8 grid grid-cols-1 md:grid-cols-2 shadow-lg" id="scene-3">
        <div class="img-container relative">
            <div class="absolute top-2 left-2 bg-black/70 px-2 py-1 text-xs rounded text-white z-10">REF IMAGE</div>
             <img src="scene3.jpg" alt="Scene 3 Image">
        </div>
        <div class="p-6 flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-xl font-bold text-white">SCENE 3: ‡∏´‡∏≠‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏†‡∏±‡∏¢</h2>
                    <span class="scene-number">INT/EXT - MONITORING</span>
                </div>
                </div>
            <span class="text-xl font-bold text-white">‡πÄ‡∏ß‡∏•‡∏≤: 0:25 - 0:40</span>
            <div>
                <p class="text-stone-300 mb-4 text-sm leading-relaxed" id="desc-3">
                    <strong>‡∏†‡∏≤‡∏û:</strong> ‡∏ï‡∏±‡∏î‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà "‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ß‡πà‡∏ô" ‡∏™‡πà‡∏≠‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡πÑ‡∏Å‡∏•‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏≠‡∏µ‡∏Å‡∏ï‡∏∂‡∏Å ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏°‡∏≠‡∏ô‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏µ‡πÅ‡∏î‡∏á<br>
                    <strong>Action:</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ß‡πà‡∏ô ‡∏ß‡∏≠ (Walkie Talkie) ‡∏°‡∏≤‡∏´‡πâ‡∏≤‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏£‡∏≤‡∏ü‡∏¥‡∏Å‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏†‡∏±‡∏¢ "80 dB Warning"
                </p>
                <div id="ai-director-3" class="hidden mt-3 p-3 rounded text-sm text-stone-300 ai-result-box"></div>
            </div>

            <div class="mt-4">
                <div class="dialogue-box p-4 rounded text-sm text-stone-300 mb-3" id="dialogue-3">
                    <p data-original="'‡πÑ‡∏≠‡πâ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô! ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Ñ‡∏µ‡πâ‡∏¢‡∏ß! ‡πÇ‡∏î‡πÇ‡∏ã‡∏∞‡∏´‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡∏î‡∏±‡∏á 80 ‡πÄ‡∏î‡∏ã‡∏¥‡πÄ‡∏ö‡∏•‡∏ô‡∏∞‡πÄ‡∏ß‡πâ‡∏¢!'"><strong class="text-orange-500">Friend:</strong> "‡πÑ‡∏≠‡πâ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô! ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏Ñ‡∏µ‡πâ‡∏¢‡∏ß! ‡πÇ‡∏î‡πÇ‡∏ã‡∏∞‡∏´‡∏±‡∏Å‡∏ï‡∏±‡∏ß‡∏î‡∏±‡∏á 80 ‡πÄ‡∏î‡∏ã‡∏¥‡πÄ‡∏ö‡∏•‡∏ô‡∏∞‡πÄ‡∏ß‡πâ‡∏¢!"</p>
                    <p data-original="'‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ï‡∏∑‡πà‡∏ô‡πÅ‡∏ô‡πà!'"><strong class="text-orange-500">Friend:</strong> "‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ï‡∏∑‡πà‡∏ô‡πÅ‡∏ô‡πà!"</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirectorNotes(3)" class="flex-1 bg-stone-700 hover:bg-violet-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö</span></button>
                    <button onclick="translateToSouthern(3)" class="flex-1 bg-stone-700 hover:bg-orange-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡πÅ‡∏´‡∏•‡∏á‡πÉ‡∏ï‡πâ (‡∏†‡∏≤‡∏©‡∏≤‡∏ñ‡∏¥‡πà‡∏ô)</span></button>
                </div>
            </div>
        </div>
    </div>

     <!-- Scene 4 -->
    <div class="story-card rounded-xl overflow-hidden mb-8 grid grid-cols-1 md:grid-cols-2 shadow-lg" id="scene-4">
        <div class="img-container relative">
            <div class="absolute top-2 left-2 bg-black/70 px-2 py-1 text-xs rounded text-white z-10">REF IMAGE</div>
             <img src="scene4.jpg   " alt="Scene 4 Image">
        </div>
        <div class="p-6 flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-xl font-bold text-white">SCENE 4: ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡∏Å‡∏´‡∏±‡∏Å</h2>
                    <span class="scene-number">INT - EXTREME CLOSE UP</span>
                </div>
            </div>
            <span class="text-xl font-bold text-white">‡πÄ‡∏ß‡∏•‡∏≤: 0:40 - 0:50</span>
            <div>

                <p class="text-stone-300 mb-4 text-sm leading-relaxed" id="desc-4">
                    <strong>‡∏†‡∏≤‡∏û:</strong> ‡∏†‡∏≤‡∏û Slow Motion ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô‡∏Ñ‡πà‡∏≠‡∏¢‡πÜ ‡∏ö‡∏£‡∏£‡∏à‡∏á‡∏á‡∏±‡∏ö‡∏Ç‡∏ô‡∏°... ‡∏†‡∏≤‡∏û X-Ray ‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡πÅ‡∏ï‡∏Å‡∏ï‡∏±‡∏ß<br>
                    <strong>Action:</strong> ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ü‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏ö ‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏î‡∏±‡∏á‡∏™‡∏ô‡∏±‡πà‡∏ô‡∏´‡∏ß‡∏±‡πà‡∏ô‡πÑ‡∏´‡∏ß ‡∏ô‡∏Å‡∏û‡∏¥‡∏£‡∏≤‡∏ö‡∏ö‡∏¥‡∏ô‡πÅ‡∏ï‡∏Å‡∏Æ‡∏∑‡∏≠‡∏ó‡∏±‡πà‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢
                </p>
                <div id="ai-director-4" class="hidden mt-3 p-3 rounded text-sm text-stone-300 ai-result-box"></div>
            </div>

            <div class="mt-4">
                <div class="dialogue-box p-4 rounded text-sm text-stone-300 mb-3" id="dialogue-4">
                    <p data-original="'‡∏Å‡∏£‡∏∏‡πä‡∏ö‡∏ö‡∏ö‡∏ö‡∏ö‡∏ö!!!!!' (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏†‡∏π‡πÄ‡∏Ç‡∏≤)"><strong class="text-orange-500">SFX:</strong> "‡∏Å‡∏£‡∏∏‡πä‡∏ö‡∏ö‡∏ö‡∏ö‡∏ö‡∏ö!!!!!" (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î‡∏†‡∏π‡πÄ‡∏Ç‡∏≤)</p>
                    <p data-original="‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏ô‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô"><strong class="text-orange-500">Visual FX:</strong> ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏™‡∏±‡πà‡∏ô‡∏™‡∏∞‡πÄ‡∏ó‡∏∑‡∏≠‡∏ô</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirectorNotes(4)" class="flex-1 bg-stone-700 hover:bg-violet-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scene 5 -->
    <div class="story-card rounded-xl overflow-hidden mb-8 grid grid-cols-1 md:grid-cols-2 shadow-lg" id="scene-5">
        <div class="img-container relative">
            <div class="absolute top-2 left-2 bg-black/70 px-2 py-1 text-xs rounded text-white z-10">REF IMAGE</div>
             <img src="scene5.jpg" alt="Scene 5 Image">
        </div>
        <div class="p-6 flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-4">
                    <h2 class="text-xl font-bold text-white">SCENE 5: ‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ</h2>
                    <span class="scene-number">EXT - CORRIDOR</span>
                </div>
                 </div>
            <span class="text-xl font-bold text-white">‡πÄ‡∏ß‡∏•‡∏≤: 0:50 - 1:00</span>
            <div>
                <p class="text-stone-300 mb-4 text-sm leading-relaxed" id="desc-5">
                    <strong>‡∏†‡∏≤‡∏û:</strong> ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡πÅ‡∏°‡πà‡∏™‡∏∞‡∏î‡∏∏‡πâ‡∏á‡∏ï‡∏∑‡πà‡∏ô ‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô‡∏ß‡∏¥‡πà‡∏á‡∏´‡∏ô‡∏µ‡∏™‡∏∏‡∏î‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏•‡∏á‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡∏ï‡∏∂‡∏Å‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏∞‡∏Ø ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏¢‡∏±‡∏á‡∏Å‡∏≥‡∏´‡πà‡∏≠‡πÇ‡∏î‡πÇ‡∏ã‡∏∞‡πÅ‡∏ô‡πà‡∏ô<br>
                    <strong>Packshot:</strong> ‡∏Ç‡∏∂‡πâ‡∏ô‡∏†‡∏≤‡∏û‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡πÇ‡∏î‡πÇ‡∏ã‡∏∞... ‡∏Å‡∏£‡∏≠‡∏ö‡∏™‡∏ô‡∏±‡πà‡∏ô (‡∏•‡∏±‡πà‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢)"
                </p>
                <div id="ai-director-5" class="hidden mt-3 p-3 rounded text-sm text-stone-300 ai-result-box"></div>
            </div>

            <div class="mt-4">
                <div class="dialogue-box p-4 rounded text-sm text-stone-300 mb-3" id="dialogue-5">
                    <p data-original="'‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô! ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ô‡∏µ‡πà!!'"><strong class="text-orange-500">Teacher:</strong> "‡πÇ‡∏ä‡∏Å‡∏∏‡∏ô! ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ô‡∏µ‡πà!!"</p>
                    <p data-original="'‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö 80 ‡πÄ‡∏î‡∏ã‡∏¥‡πÄ‡∏ö‡∏•... ‡∏ó‡∏µ‡πà‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡∏´‡πâ‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ'"><strong class="text-orange-500">Voice Over:</strong> "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏≠‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö 80 ‡πÄ‡∏î‡∏ã‡∏¥‡πÄ‡∏ö‡∏•... ‡∏ó‡∏µ‡πà‡πÉ‡∏Ñ‡∏£‡∏Å‡πá‡∏´‡πâ‡∏≤‡∏°‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"</p>
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirectorNotes(5)" class="flex-1 bg-stone-700 hover:bg-violet-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡∏Ç‡∏≠‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ú‡∏π‡πâ‡∏Å‡∏≥‡∏Å‡∏±‡∏ö</span></button>
                    <button onclick="translateToSouthern(5)" class="flex-1 bg-stone-700 hover:bg-orange-600 text-white text-xs py-2 px-3 rounded transition flex items-center justify-center gap-2"><span>‚ú® ‡πÅ‡∏´‡∏•‡∏á‡πÉ‡∏ï‡πâ (‡∏†‡∏≤‡∏©‡∏≤‡∏ñ‡∏¥‡πà‡∏ô)</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- Credits Section -->
    <div class="bg-stone-800 border border-stone-600 rounded-xl p-6 mb-8 text-center shadow-lg relative overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-violet-500 via-orange-500 to-violet-500"></div>
        <h3 class="text-lg font-bold text-white mb-6 tracking-wide uppercase">üé¨ ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</h3>
        <div class="inline-block text-left">
            <ul class="text-stone-300 space-y-3 font-mono text-sm md:text-base">
                <li class="flex items-center gap-3 p-2 hover:bg-stone-700/50 rounded transition border border-transparent hover:border-stone-600">
                    <span class="flex items-center justify-center w-6 h-6 rounded-full bg-red-900 text-red-300 text-xs font-bold">1</span> 
                    <span class="font-semibold text-stone-200">‡∏ô‡∏≤‡∏¢‡∏ê‡∏¥‡∏ï‡∏¥‡∏û‡∏á‡∏®‡πå ‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏¢‡∏±‡∏Å‡∏©‡πå</span> 
                    <span class="ml-auto text-xs text-stone-500 bg-stone-900 px-2 py-1 rounded border border-stone-700">‡∏õ‡∏ß‡∏ä.1/2 ‡∏ó‡∏ò‡∏î. 032</span>
                </li>
                <li class="flex items-center gap-3 p-2 hover:bg-stone-700/50 rounded transition border border-transparent hover:border-stone-600">
                    <span class="flex items-center justify-center w-6 h-6 rounded-full bg-orange-900 text-orange-300 text-xs font-bold">2</span> 
                    <span class="font-semibold text-stone-200">‡∏ô‡∏≤‡∏¢‡∏û‡∏µ‡∏£‡∏û‡∏±‡∏ó‡∏ò‡πå ‡∏û‡∏£‡∏°‡∏´‡∏ó‡∏≠‡∏á</span> 
                    <span class="ml-auto text-xs text-stone-500 bg-stone-900 px-2 py-1 rounded border border-stone-700">‡∏õ‡∏ß‡∏ä.1/2 ‡∏ó‡∏ò‡∏î. 035</span>
                </li>
                <li class="flex items-center gap-3 p-2 hover:bg-stone-700/50 rounded transition border border-transparent hover:border-stone-600">
                    <span class="flex items-center justify-center w-6 h-6 rounded-full bg-amber-900 text-amber-300 text-xs font-bold">3</span> 
                    <span class="font-semibold text-stone-200">‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏õ‡πç‡∏ç‡∏ç‡∏≤‡∏û‡∏£ ‡∏®‡∏£‡∏µ‡∏ß‡∏±‡∏ö</span> 
                    <span class="ml-auto text-xs text-stone-500 bg-stone-900 px-2 py-1 rounded border border-stone-700">‡∏õ‡∏ß‡∏ä.1/2 ‡∏ó‡∏ò‡∏î. 041</span>
                </li>
                <li class="flex items-center gap-3 p-2 hover:bg-stone-700/50 rounded transition border border-transparent hover:border-stone-600">
                    <span class="flex items-center justify-center w-6 h-6 rounded-full bg-yellow-900 text-yellow-300 text-xs font-bold">4</span> 
                    <span class="font-semibold text-stone-200">‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏û‡∏¥‡∏°‡∏û‡∏¥‡∏®‡∏≤ ‡∏≠‡∏∏‡∏ï‡∏ï‡∏∞‡∏°‡∏µ</span> 
                    <span class="ml-auto text-xs text-stone-500 bg-stone-900 px-2 py-1 rounded border border-stone-700">‡∏õ‡∏ß‡∏ä.1/2 ‡∏ó‡∏ò‡∏î. 034</span>
                </li>
            </ul>
        </div>
        <div class="mt-4 text-xs text-stone-600">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏≠‡∏≤‡∏ä‡∏µ‡∏ß‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏™‡∏á‡∏Ç‡∏•‡∏≤</div>
    </div>

    <script>
        // Use empty string to allow runtime injection
        const apiKey = ""; 

        // Robust Gemini Caller
        async function callGemini(prompt) {
            // NOTE: In this preview environment, apiKey is injected automatically if left empty.
            // If you run this locally, you must provide your own API key.
            
            const model = 'gemini-2.5-flash-preview-09-2025';

            try {
                document.getElementById('modelStatus').innerText = `Using Model: ${model}...`;
                
                const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }]
                };

                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(`${response.status} ${response.statusText} - ${errorData.error?.message || ''}`);
                }

                const data = await response.json();
                
                if(!data.candidates || data.candidates.length === 0) {
                    throw new Error('No candidates returned');
                }

                // Success!
                document.getElementById('modelStatus').innerHTML = `Connected: <span class="text-green-400">${model}</span>`;
                return data.candidates[0].content.parts[0].text;

            } catch (error) {
                console.warn(`Failed with ${model}:`, error);
                
                let userMessage = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ AI:\n";
                userMessage += error.message;
                alert(userMessage);
                
                document.getElementById('modelStatus').innerHTML = `<span class="text-red-400">Connection Failed</span>`;
                return null;
            }
        }

        // Feature 1: Director's Notes
        async function getDirectorNotes(sceneId) {
            const btn = document.querySelector(`#scene-${sceneId} button[onclick^="getDirectorNotes"]`);
            const outputDiv = document.getElementById(`ai-director-${sceneId}`);
            const descText = document.getElementById(`desc-${sceneId}`).innerText;
            
            const originalBtnText = btn.innerHTML;
            btn.innerHTML = `<span class="loading-spinner"></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...`;
            btn.disabled = true;

            const prompt = `
                Act as a professional Film Director. Analyze this scene description for a TV Commercial:
                "${descText}"
                
                Provide 3 brief technical notes in Thai Language (Bullet points) regarding:
                1. Camera Angle (‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á)
                2. Lighting (‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÅ‡∏™‡∏á)
                3. Acting Mood (‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏ô‡∏±‡∏Å‡πÅ‡∏™‡∏î‡∏á)
                Keep it concise and professional.
            `;

            const result = await callGemini(prompt);

            if (result) {
                outputDiv.innerHTML = `<strong class="text-violet-400 block mb-2">üé¨ Director's Note (AI):</strong>${result.replace(/\n/g, '<br>')}`;
                outputDiv.classList.remove('hidden');
            }
            
            btn.innerHTML = originalBtnText;
            btn.disabled = false;
        }

        // Feature 2: Southern Dialect Translator
        async function translateToSouthern(sceneId) {
            const btn = document.querySelector(`#scene-${sceneId} button[onclick^="translateToSouthern"]`);
            const dialogueBox = document.getElementById(`dialogue-${sceneId}`);
            const paragraphs = dialogueBox.querySelectorAll('p[data-original]');
            
            const originalBtnText = btn.innerHTML;
            btn.innerHTML = `<span class="loading-spinner"></span> ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏õ‡∏•‡∏†‡∏≤‡∏©‡∏≤...`;
            btn.disabled = true;

            let dialogueText = "";
            paragraphs.forEach(p => {
                dialogueText += p.getAttribute('data-original') + "\n";
            });

            const prompt = `
                Translate the following dialogue into "Southern Thai Dialect (Songkhla style)". 
                Make it sound natural, funny, and fit for a local student/teacher context.
                Do not translate Sound Effects (SFX).
                
                Dialogue to translate:
                ${dialogueText}
                
                Return ONLY the translated lines, line by line.
            `;

            const result = await callGemini(prompt);

            if (result) {
                const translatedLines = result.split('\n').filter(line => line.trim() !== '');
                paragraphs.forEach((p, index) => {
                    if (translatedLines[index]) {
                        const speakerLabel = p.querySelector('strong').outerHTML;
                        p.innerHTML = `${speakerLabel} <span class="text-orange-300">${translatedLines[index]}</span>`;
                    }
                });
                
                if (!dialogueBox.querySelector('.dialect-badge')) {
                    const badge = document.createElement('div');
                    badge.className = 'dialect-badge text-xs text-orange-500 mt-2 text-right italic';
                    badge.innerHTML = '*‡πÅ‡∏õ‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÉ‡∏ï‡πâ‡πÇ‡∏î‡∏¢ AI';
                    dialogueBox.appendChild(badge);
                }
            }

            btn.innerHTML = "‚ú® ‡πÅ‡∏õ‡∏•‡∏Å‡∏•‡∏±‡∏ö (Reset)";
            btn.onclick = () => window.location.reload();
            btn.disabled = false;
        }
    </script>
</body>
</html>